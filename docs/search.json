[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "EddyPro API",
    "section": "",
    "text": "Find more info here"
  },
  {
    "objectID": "API_Run.html",
    "href": "API_Run.html",
    "title": "EddyPro API",
    "section": "",
    "text": "This notebook gives an outline for working with the API.\nimport os\nos.chdir(\"C:\\\\Users\\\\jskeeter\\\\CANFLUX\\\\EddyPro_API\")\nimport eddyProAPI\nimport importlib\nimportlib.reload(eddyProAPI)\nkwargs = {\n    'siteID':'BB',\n    'dateRange':['2023-06-15 20:00','2023-12-31 23:59'],\n    # 'sourceDir':[\"Y:/BB/raw/2019\"],#,\"Y:/BB/raw/2024\"],\n    'sourceDir':[\"C:/Users/jskeeter/CANFLUX/highfreq/BB/raw/2023\"],#,\"Y:/BB/raw/2024\"],\n    'reset':True,\n    'metaDataUpdates':'C:/Users/jskeeter/CANFLUX/highfreq/BB/Manual_Metadata_Updates.csv',\n    'priority':'High Priority',\n    'runMode':'2',\n    # 'processes':1,\n    # 'debug':True,\n    'biometUser':True\n}\n\n# python eddyProAPI.py --siteID BB --biometUser True --metaDataUpdates Y:/BB/Manual_Metadata_Updates.csv --eddyProStaticConfig Templates/ClosedPathStandard.eddypro --dateRange 2023-01-01 2024-08-30 --sourceDir Y:/BB/raw/2023 Y:/BB/raw/2024 --debug False --runMode 1\neP = eddyProAPI.eddyProAPI(**kwargs)\n\nDeleting contents of :\nC:\\Users\\jskeeter\\CANFLUX\\highfreq\\BB\\metadata\nC:\\Users\\jskeeter\\CANFLUX\\highfreq\\BB\\eddyProAPIOutputs\nBiomet user: Querying database for up-to-date biomet data\nGenerating requested files tasks for BB over: ['2023-06-15 20:00' '2023-12-31 23:59']\nSee output: C:\\Users\\jskeeter\\CANFLUX\\highfreq\\BB\\metadata/BB_biometData.csv\ncanopy_height missing, outputting NaNs\n\n\nC:\\Users\\jskeeter\\CANFLUX\\Biomet.net\\Python\\csvFromBinary.py:82: FutureWarning: 'S' is deprecated and will be removed in a future version, please use 's' instead.\n  DT = pd.to_datetime(tv-config['dbase_metadata']['timestamp']['base'],unit=config['dbase_metadata']['timestamp']['base_unit']).round('S')\nC:\\Users\\jskeeter\\CANFLUX\\Biomet.net\\Python\\csvFromBinary.py:82: FutureWarning: 'S' is deprecated and will be removed in a future version, please use 's' instead.\n  DT = pd.to_datetime(tv-config['dbase_metadata']['timestamp']['base'],unit=config['dbase_metadata']['timestamp']['base_unit']).round('S')\n\n\nSee output: C:\\Users\\jskeeter\\CANFLUX\\highfreq\\BB\\metadata/BB_dynamicMetadata.csv\nSearching C:/Users/jskeeter/CANFLUX/highfreq/BB/raw/2023/08\nFiles Search Complete, time elapsed:  0.006\nReading Data for:\n2023-8\n25824 0.0\nC:\\Users\\jskeeter\\CANFLUX\\highfreq\\BB\\raw\\2023\\08\\2023-08-01T120000_AIU-0446.ghg complete, time elapsed:git  0.309\n25824 0.0\nC:\\Users\\jskeeter\\CANFLUX\\highfreq\\BB\\raw\\2023\\08\\2023-08-01T123000_AIU-0446.ghg complete, time elapsed:git  0.325\n25824 0.0\nC:\\Users\\jskeeter\\CANFLUX\\highfreq\\BB\\raw\\2023\\08\\2023-08-01T130000_AIU-0446.ghg complete, time elapsed:git  0.381\n25824 0.0\nC:\\Users\\jskeeter\\CANFLUX\\highfreq\\BB\\raw\\2023\\08\\2023-08-01T133000_AIU-0446.ghg complete, time elapsed:git  0.327\n25824 0.0\nC:\\Users\\jskeeter\\CANFLUX\\highfreq\\BB\\raw\\2023\\08\\2023-08-01T140000_AIU-0446.ghg complete, time elapsed:git  0.31\n25824 0.0\nC:\\Users\\jskeeter\\CANFLUX\\highfreq\\BB\\raw\\2023\\08\\2023-08-01T143000_AIU-0446.ghg complete, time elapsed:git  0.331\n25824 0.0\nC:\\Users\\jskeeter\\CANFLUX\\highfreq\\BB\\raw\\2023\\08\\2023-08-01T150000_AIU-0446.ghg complete, time elapsed:git  0.314\n25824 0.0\nC:\\Users\\jskeeter\\CANFLUX\\highfreq\\BB\\raw\\2023\\08\\2023-08-01T153000_AIU-0446.ghg complete, time elapsed:git  0.327\n2023-8 complete in :  0.338\nReading Complete, total time elapsed:  2.637\nApplying Manual Metadata Adjustments\n2023-03-17 15:00:00 2023-08-01 15:30:00 ('Instruments', 'instr_2_northward_separation') 9.72\n2023-03-17 15:00:00 2023-08-01 15:30:00 ('Instruments', 'instr_2_eastward_separation') -2.42\n2023-03-17 15:00:00 2023-08-01 15:30:00 ('Instruments', 'instr_2_vertical_separation') 0.0\n2023-03-17 15:00:00 2023-08-01 15:30:00 ('Instruments', 'instr_2_tube_length') 56.0\n2023-03-17 15:00:00 2023-08-01 15:30:00 ('Instruments', 'instr_2_tube_diameter') 5.33\n2023-03-17 15:00:00 2023-08-01 15:30:00 ('Instruments', 'instr_3_northward_separation') 34.45\n2023-03-17 15:00:00 2023-08-01 15:30:00 ('Instruments', 'instr_3_eastward_separation') -48.9\n2023-03-17 15:00:00 2023-08-01 15:30:00 ('Instruments', 'instr_3_vertical_separation') 0.0\n2024-03-07 13:00:00 2023-08-01 15:30:00 ('Instruments', 'instr_2_northward_separation') 6.79\n2024-03-07 13:00:00 2023-08-01 15:30:00 ('Instruments', 'instr_2_eastward_separation') -1.69\n2024-03-07 13:00:00 2023-08-01 15:30:00 ('Instruments', 'instr_2_vertical_separation') 0.0\n2024-03-07 13:00:00 2023-08-01 15:30:00 ('Instruments', 'instr_2_tube_length') 65.0\n2023-07-21 00:00:00 2023-11-07 11:00:00 ('Site', 'site_name') BurnsBog2018\n2023-07-21 00:00:00 2023-11-07 11:00:00 ('Site', 'canopy_height') 0.3\n2023-07-21 00:00:00 2023-11-07 11:00:00 ('Station', 'station_name') GeogFlux\n2023-07-21 00:00:00 2023-11-07 11:00:00 ('Instruments', 'instr_1_height') 1.8\n2023-07-21 00:00:00 2023-11-07 11:00:00 ('Instruments', 'instr_1_north_offset') 166.0\n2023-07-21 00:00:00 2023-11-07 11:00:00 ('FileDescription', 'col_18_instrument') csat3_1\n2023-07-21 00:00:00 2023-11-07 11:00:00 ('FileDescription', 'col_19_instrument') csat3_1\n2023-07-21 00:00:00 2023-11-07 11:00:00 ('FileDescription', 'col_20_instrument') csat3_1\n2023-07-21 00:00:00 2023-11-07 11:00:00 ('FileDescription', 'col_21_instrument') csat3_1\n2024-04-16 12:30:00 2023-08-01 15:30:00 ('Instruments', 'instr_2_northward_separation') 7.76\n2024-04-16 12:30:00 2023-08-01 15:30:00 ('Instruments', 'instr_2_eastward_separation') -1.94\n2024-04-16 12:30:00 2023-08-01 15:30:00 ('Instruments', 'instr_2_vertical_separation') 0.0\n2024-04-16 12:30:00 2023-08-01 15:30:00 ('Instruments', 'instr_2_tube_length') 114.0\nGrouping by Configuration\n\n\nC:\\Users\\jskeeter\\CANFLUX\\EddyPro_API\\eddyProAPI.py:377: FutureWarning: DataFrameGroupBy.grouper is deprecated and will be removed in a future version of pandas.\n  index = self.metaDataValues.index)\n\n\nWriting Metadata Files\nC:\\Users\\jskeeter\\CANFLUX\\highfreq\\BB\\metadata/group_1_ColDefs.eddypro\nApplying Filters:\nSonic_Filter :\ncondition_1\n0\nLI7200_Filter :\ncondition_1\n0\ncondition_2\n0\nPre-Processing complete, time elapsed 3.65 seconds\nCreating C:\\Users\\jskeeter\\CANFLUX\\EddyPro_API\\temp\\group_1_rp_A.eddypro for 8 files\nCreating C:\\Users\\jskeeter\\CANFLUX\\EddyPro_API\\temp\\group_1_fcc.eddypro for 8 files\nInitiating EddyPro Runs on 1 cores at High Priority priority\n\n\nC:\\Users\\jskeeter\\CANFLUX\\EddyPro_API\\eddyProAPI.py:701: FutureWarning: The 'keep_date_col' keyword in pd.read_csv is deprecated and will be removed in a future version. Explicitly remove unwanted columns after parsing instead.\n  Temp = Temp.set_index(list(kwargs['parse_dates'].keys())[0]).sort_index()\nC:\\Users\\jskeeter\\CANFLUX\\EddyPro_API\\eddyProAPI.py:701: FutureWarning: Support for nested sequences for 'parse_dates' in pd.read_csv is deprecated. Combine the desired columns with pd.to_datetime after parsing instead.\n  Temp = Temp.set_index(list(kwargs['parse_dates'].keys())[0]).sort_index()\n\n\nSaving As \n C:\\Users\\jskeeter\\CANFLUX\\EddyPro_API\\temp\\group_1/eddypro_group_1_fcc_fluxnet.csv\nrunEP complete, time elapsed 58.808 seconds\n# eP.config['BiometUser']\n\n{'Biomet.net': 'C:/Biomet.net/', 'Database': 'C:/Database/'}\neP.fileType\n\n'ghg'\n# eP.fileInventory.loc[eP.fileInventory.index.year==2019].groupby('groupID').count()['filename']\n# # eP.groupAndFilter()\n# # eP.metaDataValues.loc[eP.metaDataValues.index.year==2019]\neP.fileInventory\n\n\n\n\n\n\n\n\nsource\nfilename\nfile_prototype\nFilter Flags\ngroupID\n\n\nTIMESTAMP\n\n\n\n\n\n\n\n\n\n2023-06-15 00:00:00\nC:\\highfreq\\BB\\raw\\2023-06-15T000000_LI-7200.ghg\n2023-06-15T000000_LI-7200.ghg\nyyyy-mm-ddTHHMM??_LI-7200.ghg\n~\n1\n\n\n2023-06-15 00:30:00\nC:\\highfreq\\BB\\raw\\2023-06-15T003000_LI-7200.ghg\n2023-06-15T003000_LI-7200.ghg\nyyyy-mm-ddTHHMM??_LI-7200.ghg\n~\n3\n\n\n2023-06-15 01:00:00\nC:\\highfreq\\BB\\raw\\2023\\06\\2023-06-15T010000_L...\n2023-06-15T010000_LI-7200.ghg\nyyyy-mm-ddTHHMM??_LI-7200.ghg\n~\n3\n\n\n2023-06-15 01:30:00\nC:\\highfreq\\BB\\raw\\2023\\06\\2023-06-15T013000_L...\n2023-06-15T013000_LI-7200.ghg\nyyyy-mm-ddTHHMM??_LI-7200.ghg\n~\n3\n\n\n2023-06-15 02:00:00\nC:\\highfreq\\BB\\raw\\2023\\06\\2023-06-15T020000_L...\n2023-06-15T020000_LI-7200.ghg\nyyyy-mm-ddTHHMM??_LI-7200.ghg\n~\n3\n\n\n...\n...\n...\n...\n...\n...\n\n\n2024-02-04 09:00:00\n~\n~\n~\n~\n-9999\n\n\n2024-02-04 09:30:00\n~\n~\n~\n~\n-9999\n\n\n2024-02-04 10:00:00\n~\n~\n~\n~\n-9999\n\n\n2024-02-04 10:30:00\nC:\\highfreq\\BB\\raw\\2024\\02\\2024-02-04T104817_L...\n2024-02-04T104817_LI-7200.ghg\nyyyy-mm-ddTHHMM??_LI-7200.ghg\nLI7200_Filter: condition_1\n-9999\n\n\n2024-02-04 11:00:00\nC:\\highfreq\\BB\\raw\\2024\\02\\2024-02-04T111255_L...\n2024-02-04T111255_LI-7200.ghg\nyyyy-mm-ddTHHMM??_LI-7200.ghg\nLI7200_Filter: condition_1\n-9999\n\n\n\n\n11255 rows × 5 columns\neP.fileInventory=eP.fileInventory.loc[eP.fileInventory.index.year&gt;2019].copy()\n# eP.rawDataStatistics=eP.rawDataStatistics.loc[eP.rawDataStatistics.index.year&gt;2019].copy()\n# eP.metaDataValues=eP.metaDataValues.loc[eP.metaDataValues.index.year&gt;2019].copy()\n# eP.configurationGroups=eP.configurationGroups.loc[eP.configurationGroups.index.year&gt;2019].copy()\neP.saveMetadataFiles()\nfrom distutils.dir_util import copy_tree\nimport batchProcessing\nimport time\nT1 = time.time()\nd_in,d_out = 'Y:\\\\BB\\\\eddyProAPIOutputs\\\\202408221035\\\\group_6\\\\eddypro_full_cospectra','Y:\\\\BB\\\\cpTest'\n# copy_tree(d_in,d_out) &gt; Takes 541 seconds\nbatchProcessing.pasteWithSubprocess(d_in,d_out+'2',option='xcopy')\nprint('Elapsed: ',time.time() - T1)\n\nElapsed:  541.9344818592072\nimport pandas as pd\nimport os\ndf = pd.DataFrame(data={'a':[1,2],'b':[3,4]})\n# pth = 'Y://BB//metadata//BB_biometData_202405010000_202405040000.csv'\npth = 'Y://BB/metadata/test.csv'\npth = os.path.abspath(pth)\n# df.to_csv(pth,index=False)\nprint(pth)\n\nY:\\BB\\metadata\\test.csv"
  },
  {
    "objectID": "API_Run.html#example-command-line-call",
    "href": "API_Run.html#example-command-line-call",
    "title": "EddyPro API",
    "section": "Example Command Line Call",
    "text": "Example Command Line Call\n’One winmet call this before activating .venv\nSet-ExecutionPolicy Unrestricted -Scope Process\n.\\.venv\\Scripts\\activate                                                               \npy eddyProAPI.py --siteID BB --biometUser True --sourceDir Y:/BB/raw/2024/ --metaDataUpdates Y:/BB/Manual_Metadata_Updates.csv --runMode full --eddyProStaticConfig ini_files/ClosedPathStandard.eddypro\npy eddyProAPI.py --siteID BBS --biometUser True --sourceDir C:/data-dump/BBS/EC_Station/2024/ --metaDataTemplate C:/highfreq/BBS/TOA5_BBS.FLUX_2023_06_14_1500.metadata --runMode 1 --eddyProStaticConfig ini_files/OpenPathStandard.eddypro --fileType dat --timeShift 30"
  },
  {
    "objectID": "API_Run.html#run-preprocessing",
    "href": "API_Run.html#run-preprocessing",
    "title": "EddyPro API",
    "section": "Run PreProcessing",
    "text": "Run PreProcessing\n\nimport eddyProAPI\nimport importlib\nimportlib.reload(eddyProAPI)\nkwargs = {\n    'siteID':'BB',\n    'dateRange':['2024-04-15','2024-04-17'],\n    'sourceDir':\"C:/highfreq/BB/raw/2024/04\",\n    # 'reset':True,\n    'metaDataUpdates':'C:/highfreq/BB/Manual_Metadata_Updates.csv',\n    'priority':'High Priority',\n    'biometUser':True\n}\nkwargs['userDefinedEddyProSettings'] = {\n        'Project':{\n            'hf_meth':'4'\n            }}\npre = eddyProAPI.preProcessing(**kwargs)\n\nInitializing tasks for BB over: ['2024-04-15 00:00' '2024-04-17 00:00']\nSee output: C:/temp//BB/metadata//BB_biometData_202404150000_202404170000.csv\ncanopy_height missing, outputting NaNs\nSee output: C:/temp//BB/metadata//BB_dynamicMetadata_202404150000_202404170000.csv\nAll tasks completed successfully\nfileInventory {'parse_dates': [0], 'index_col': [0], 'filepath_or_buffer': 'C:/temp//BB/metadata/fileInventory.csv'}\nrawDataStatistics {'parse_dates': [0], 'index_col': [0], 'header': [0, 1, 2], 'filepath_or_buffer': 'C:/temp//BB/metadata/rawDataStatistics.csv'}\nmetaDataValues {'parse_dates': [0], 'index_col': [0], 'header': [0, 1], 'filepath_or_buffer': 'C:/temp//BB/metadata/metaDataValues.csv'}\nconfigurationGroups {'index_col': [0], 'header': [0, 1, 2], 'filepath_or_buffer': 'C:/temp//BB/metadata/configurationGroups.csv'}\nSearching C:/highfreq/BB/raw/2024/04\n[████████████████████████████████████████████████████████████] 110/110\n\nFiles Search Complete, time elapsed:  0.914\nReading Data\nReading Complete, time elapsed:  0.021\nApplying Manual Metadata Adjustments\nManual Metadata Adjustments Complete\nGrouping by Configuration\nWriting Metadata Files\nApplying Filters:\n\n Sonic_Filter :\ncondition_1\nmin variables ['Aux 1 - U (m/s)' 'Aux 2 - V (m/s)' 'Aux 3 - W (m/s)'] criteria Data.loc[groupIX,variables]&lt;-100\n(0,)\nmax variables ['Aux 1 - U (m/s)' 'Aux 2 - V (m/s)' 'Aux 3 - W (m/s)'] criteria Data.loc[groupIX,variables]&gt;100\n(0,)\n\n LI7200_Filter :\ncondition_1\nmean variables ['Flow Rate (lpm)'] criteria Data.loc[groupIX,variables]&lt;10\n(0,)\ncondition_2\nmean variables ['Average Signal Strength'] criteria Data.loc[groupIX,variables]&lt;90\n(0,)\nPre-Processing complete, time elapsed 2.711 seconds"
  },
  {
    "objectID": "Documentation/about.html#about-eddypro",
    "href": "Documentation/about.html#about-eddypro",
    "title": "An Application Program Interface for Automating and Parallelizing EddyPro®",
    "section": "About EddyPro®",
    "text": "About EddyPro®\n“EddyPro® Software” (2021) is one of the most popular applications for processing Eddy Covariance (EC) data.\n\nIt designed to provide easy, accurate EC flux computations LI-COR (2021).\nOpen source software with a graphic user interface (GUI)\n\nInterfaces with a processing pipeline is executed in FORTRAN\nBased on the “ECO2S” (2011) package"
  },
  {
    "objectID": "Documentation/about.html#advantages-of-eddypro",
    "href": "Documentation/about.html#advantages-of-eddypro",
    "title": "An Application Program Interface for Automating and Parallelizing EddyPro®",
    "section": "Advantages of EddyPro®",
    "text": "Advantages of EddyPro®\nThe GUI makes flux processing accessible.\n\nPoint and click processing without need for coding\nUsers can see the wide range of methods options available\n\nLinks to comprehensive documentation\n\nWorks great for processing a single season of EC data"
  },
  {
    "objectID": "Documentation/about.html#disadvantages-of-eddypro",
    "href": "Documentation/about.html#disadvantages-of-eddypro",
    "title": "An Application Program Interface for Automating and Parallelizing EddyPro®",
    "section": "Disadvantages of EddyPro®",
    "text": "Disadvantages of EddyPro®\nPoint and click processing becomes a bottle.\n\nNew runs must be initiated each time more data comes in\n\nAmple room for error when conducted by inexperienced users (e.g., research assistants)\nLeads to delays in processing\n\nLong records take a long time to process, users may avoid:\n\nTesting alternate methods\nFlux recalculation"
  },
  {
    "objectID": "Documentation/about.html#how-the-eddypro-api-can-help",
    "href": "Documentation/about.html#how-the-eddypro-api-can-help",
    "title": "An Application Program Interface for Automating and Parallelizing EddyPro®",
    "section": "How the EddyPro® API Can Help?",
    "text": "How the EddyPro® API Can Help?"
  },
  {
    "objectID": "Documentation/about.html#references",
    "href": "Documentation/about.html#references",
    "title": "An Application Program Interface for Automating and Parallelizing EddyPro®",
    "section": "References",
    "text": "References\n\n\n“ECO2S.” 2011. Infrastructure for Measurements of the European Carbon Cycle consortium. http://gaia.agraria.unitus.it/eco2s.\n\n\n“EddyPro® Software.” 2021. LI-COR; Infrastructure for Measurements of the European Carbon Cycle consortium. https://www.licor.com/env/support/EddyPro/software.html.\n\n\nLI-COR, Inc. 2021. “EddyPro® Version 7.0 Help and User’s Guide.” LI-COR, Inc. Lincoln, NE. https://www.licor.com/env/support/EddyPro/topics/introduction.html#top."
  },
  {
    "objectID": "Documentation/about.html#how-the-api-can-help",
    "href": "Documentation/about.html#how-the-api-can-help",
    "title": "An Application Program Interface for Automating and Parallelizing EddyPro®",
    "section": "How the API Can Help?",
    "text": "How the API Can Help?\nThe Application Program Interface (API) can be used to automate and parallelize flux processing.\n\nTemplate EddyPro® files serve as the basis for a project\nUsers can view/modify processing options using the EddyPro GUI or a text editor\nCall the API from command line, a python script, or run in a Jupyter Notebook"
  },
  {
    "objectID": "Documentation/about.html#how-the-api-can-help-1",
    "href": "Documentation/about.html#how-the-api-can-help-1",
    "title": "An Application Program Interface for Automating and Parallelizing EddyPro®",
    "section": "How the API Can Help?",
    "text": "How the API Can Help?\nThe Application Program Interface (API) can be used to automate and parallelize flux processing.\n\nSchedule calls to\nUsers can view/modify processing options using the EddyPro GUI or a text editor\nCall the API from command line, a python script, or run in a Jupyter Notebook"
  },
  {
    "objectID": "Documentation/about.html#how-the-api-can-help-2",
    "href": "Documentation/about.html#how-the-api-can-help-2",
    "title": "An Application Program Interface for Automating and Parallelizing EddyPro®",
    "section": "How the API Can Help?",
    "text": "How the API Can Help?\nThe Application Program Interface (API) can be used to automate and parallelize flux processing.\n\nSchedule calls to\nUsers can view/modify processing options using the EddyPro GUI or a text editor\nCall the API from command line, a python script, or run in a Jupyter Notebook"
  },
  {
    "objectID": "Documentation/about.html#more-information",
    "href": "Documentation/about.html#more-information",
    "title": "An Application Program Interface for Automating and Parallelizing EddyPro®",
    "section": "More Information",
    "text": "More Information"
  }
]